buildscript {
	repositories {
		maven {
			url "https://plugins.gradle.org/m2/"
		}
	}
	dependencies {
		classpath "org.gint:gint-atlassian:3.8.4"
	}
}

apply plugin: 'org.gint.atlassian'
apply from: gint.resourceDirectory +'/src/itest-conditions/condition.gradle'

def functionKey = info?.isCloud? "com.atlassian.plugins.atlassian-connect-plugin:com.innovalog.${testCloudBuild}__LinkedIssuesCondition" : 'com.innovalog.jmwe.jira-misc-workflow-extensions:linked-issues-condition'

def issueConstraints = [
		atLeastOne : [  "minLinkedIssues=1","maxLinkedIssues=" ],
		minTwo : [ "minLinkedIssues=2", "maxLinkedIssues=" ],
		maxTwo : [ "minLinkedIssues=", "maxLinkedIssues=2" ],
		minTwoMaxTwo : [ "minLinkedIssues=2", "maxLinkedIssues=2" ],
		atLeastThreeAndAtMostSix : [ "minLinkedIssues=3", "maxLinkedIssues=6" ]
]

def verifyAllLinkedIssues = [
		yes : [	"checkAllLinkedIssues=yes" ],
		no : [ "checkAllLinkedIssues=no" ]
]

def linkedIssuesMode = [
		requireLinks : [ "conditionMode=requireLinks" ],
		requireSpecificLinkedIssues : [ "conditionMode=requireLinks", /groovyExpression=issue.get('assignee')?.name == "$user"/ ],
		checkLinks : [ "conditionMode=checkLinks", "groovyExpression=$groovyExpression.checkPriorityHigh" ],
		forbidLinks : [	"conditionMode=forbidLinks", "groovyExpression=$groovyExpression.checkPriorityHigh" ]
]

project.ext.requireRelatedIssuesConditionCloud = [
		subtask : "{\"selectedLinkTypeId\":\"jira_subtask_link\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"noCond\",\"condition\":\"true\",\"validatorMode\":\"requireLinks\",\"expression\":\"(issue.subtasks.some(linkedIssue => (true)))\"}",
		issueBelongsToEpic : "{\"selectedLinkTypeId\":\"Epic-Story Link\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"noCond\",\"condition\":\"true\",\"validatorMode\":\"requireLinks\",\"expression\":\"(!!issue.stories && issue.stories.some(linkedIssue => (true)))\"}",
		linkByAnyLink : "{\"selectedLinkTypeId\":\"*\",\"selectedLinkTypeDirection\":\"*\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"noCond\",\"condition\":\"true\",\"validatorMode\":\"requireLinks\",\"expression\":\"(issue.links.some(issueLink => (true)))\"}",
		linkByBlock : "{\"selectedLinkTypeId\":\"10000\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"noCond\",\"condition\":\"true\",\"validatorMode\":\"requireLinks\",\"expression\":\"(issue.links.some(issueLink => issueLink.type.id == 10000 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (true)))\"}",
		linkByisBlockedBy : "{\"selectedLinkTypeId\":\"10000\",\"selectedLinkTypeDirection\":\"inward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"noCond\",\"condition\":\"true\",\"validatorMode\":\"requireLinks\",\"expression\":\"(issue.links.some(issueLink => issueLink.type.id == 10000 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward) && (true)))\"}",
		linkByClones : "{\"selectedLinkTypeId\":\"10001\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"noCond\",\"condition\":\"true\",\"validatorMode\":\"requireLinks\",\"expression\":\"(issue.links.some(issueLink => issueLink.type.id == 10001 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (true)))\"}",
		linkByIsClonedBy : "{\"selectedLinkTypeId\":\"10001\",\"selectedLinkTypeDirection\":\"inward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"noCond\",\"condition\":\"true\",\"validatorMode\":\"requireLinks\",\"expression\":\"(issue.links.some(issueLink => issueLink.type.id == 10001 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward) && (true)))\"}",
		linkByDuplicates : "{\"selectedLinkTypeId\":\"10002\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"noCond\",\"condition\":\"true\",\"validatorMode\":\"requireLinks\",\"expression\":\"(issue.links.some(issueLink => issueLink.type.id == 10002 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (true)))\"}",
		linkByIsDuplicatedBy : "{\"selectedLinkTypeId\":\"10002\",\"selectedLinkTypeDirection\":\"inward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"noCond\",\"condition\":\"true\",\"validatorMode\":\"requireLinks\",\"expression\":\"(issue.links.some(issueLink => issueLink.type.id == 10002 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward) && (true)))\"}",
		linkByRelatesTo : "{\"selectedLinkTypeId\":\"10003\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"noCond\",\"condition\":\"true\",\"validatorMode\":\"requireLinks\",\"expression\":\"(issue.links.some(issueLink => issueLink.type.id == 10003 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (true)))\"}",
]

project.ext.checkRelatedIssuesConditionCloud = [
		subtask : "{\"selectedLinkTypeId\":\"jira_subtask_link\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"checkLinks\",\"expression\":\"(issue.subtasks.length == 0 || issue.subtasks.some(linkedIssue => (!!issue.priority && issue.priority.name == 'High')))\"}",
		issueBelongsToEpic : "{\"selectedLinkTypeId\":\"Epic-Story Link\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"checkLinks\",\"expression\":\"(!issue.stories || issue.stories.length == 0 || issue.stories.some(linkedIssue => (!!issue.priority && issue.priority.name == 'High')))\"}",
		linkByAnyLink : "{\"selectedLinkTypeId\":\"*\",\"selectedLinkTypeDirection\":\"*\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"checkLinks\",\"expression\":\"(!issue.links || issue.links.length == 0 || issue.links.some(issueLink => (!!issue.priority && issue.priority.name == 'High')))\"}",
		linkByBlock : "{\"selectedLinkTypeId\":\"10000\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"checkLinks\",\"expression\":\"(!issue.links.some(issueLink => issueLink.type.id == 10000 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward)) || issue.links.some(issueLink => issueLink.type.id == 10000 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High')))\"}",
		linkByisBlockedBy : "{\"selectedLinkTypeId\":\"10000\",\"selectedLinkTypeDirection\":\"inward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"checkLinks\",\"expression\":\"(!issue.links.some(issueLink => issueLink.type.id == 10000 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward)) || issue.links.some(issueLink => issueLink.type.id == 10000 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High')))\"}",
		linkByClones : "{\"selectedLinkTypeId\":\"10001\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"checkLinks\",\"expression\":\"(!issue.links.some(issueLink => issueLink.type.id == 10001 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward)) || issue.links.some(issueLink => issueLink.type.id == 10001 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High')))\"}",
		linkByIsClonedBy : "{\"selectedLinkTypeId\":\"10001\",\"selectedLinkTypeDirection\":\"inward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"checkLinks\",\"expression\":\"(!issue.links.some(issueLink => issueLink.type.id == 10001 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward)) || issue.links.some(issueLink => issueLink.type.id == 10001 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High')))\"}",
		linkByDuplicates : "{\"selectedLinkTypeId\":\"10002\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"checkLinks\",\"expression\":\"(!issue.links.some(issueLink => issueLink.type.id == 10002 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward)) || issue.links.some(issueLink => issueLink.type.id == 10002 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High')))\"}",
		linkByIsDuplicatedBy : "{\"selectedLinkTypeId\":\"10002\",\"selectedLinkTypeDirection\":\"inward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"checkLinks\",\"expression\":\"(!issue.links.some(issueLink => issueLink.type.id == 10002 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward)) || issue.links.some(issueLink => issueLink.type.id == 10002 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High')))\"}",
		linkByRelatesTo : "{\"selectedLinkTypeId\":\"10003\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"checkLinks\",\"expression\":\"(!issue.links.some(issueLink => issueLink.type.id == 10003 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward)) || issue.links.some(issueLink => issueLink.type.id == 10003 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High')))\"}",
]

project.ext.forbidRelatedIssuesConditionCloud = [
		subtask : "{\"selectedLinkTypeId\":\"jira_subtask_link\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"forbidLinks\",\"expression\":\"(!(issue.subtasks.some(linkedIssue => (!!issue.priority && issue.priority.name == 'High'))))\"}",
		issueBelongsToEpic : "{\"selectedLinkTypeId\":\"Epic-Story Link\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"forbidLinks\",\"expression\":\"(!(!!issue.stories && issue.stories.some(linkedIssue => (!!issue.priority && issue.priority.name == 'High'))))\"}",
		linkByAnyLink : "{\"selectedLinkTypeId\":\"*\",\"selectedLinkTypeDirection\":\"*\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"forbidLinks\",\"expression\":\"(!(issue.links.some(issueLink => (!!issue.priority && issue.priority.name == 'High'))))\"}",
		linkByBlock : "{\"selectedLinkTypeId\":\"10000\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"forbidLinks\",\"expression\":\"(!(issue.links.some(issueLink => issueLink.type.id == 10000 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High'))))\"}",
		linkByisBlockedBy : "{\"selectedLinkTypeId\":\"10000\",\"selectedLinkTypeDirection\":\"inward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"forbidLinks\",\"expression\":\"(!(issue.links.some(issueLink => issueLink.type.id == 10000 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High'))))\"}",
		linkByClones : "{\"selectedLinkTypeId\":\"10001\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"forbidLinks\",\"expression\":\"(!(issue.links.some(issueLink => issueLink.type.id == 10001 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High'))))\"}",
		linkByIsClonedBy : "{\"selectedLinkTypeId\":\"10001\",\"selectedLinkTypeDirection\":\"inward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"forbidLinks\",\"expression\":\"(!(issue.links.some(issueLink => issueLink.type.id == 10001 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High'))))\"}",
		linkByDuplicates : "{\"selectedLinkTypeId\":\"10002\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"forbidLinks\",\"expression\":\"(!(issue.links.some(issueLink => issueLink.type.id == 10002 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High'))))\"}",
		linkByIsDuplicatedBy : "{\"selectedLinkTypeId\":\"10002\",\"selectedLinkTypeDirection\":\"inward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"forbidLinks\",\"expression\":\"(!(issue.links.some(issueLink => issueLink.type.id == 10002 && (issueLink.direction == 'inward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High'))))\"}",
		linkByRelatesTo : "{\"selectedLinkTypeId\":\"10003\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"!!issue.priority && issue.priority.name == 'High'\",\"validatorMode\":\"forbidLinks\",\"expression\":\"(!(issue.links.some(issueLink => issueLink.type.id == 10003 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (!!issue.priority && issue.priority.name == 'High'))))\"}",
]

def requireRelatedIssue = info?.isCloud ? requireRelatedIssuesConditionCloud : relatedIssue
def checkRelatedIssue = info?.isCloud ? checkRelatedIssuesConditionCloud : relatedIssue
def forbidRelatedIssue = info?.isCloud ? forbidRelatedIssuesConditionCloud : relatedIssue

def fieldsToRemove = [ "currentIssue", "parentIssue", "epicOfTheCurrentIssue","parentPortfolio" ]

fieldsToRemove.each { key ->
	requireRelatedIssue.remove(key)
}

fieldsToRemove.each { key ->
	checkRelatedIssue.remove(key)
}

fieldsToRemove.each { key ->
	forbidRelatedIssue.remove(key)
}

requireRelatedIssue.eachWithIndex { key, value, i ->
	def transition = 'verify_require_certain_related_issues_' + key
	def cloud = value
	def server =  ["selectedLinkType=$value" , linkedIssuesMode.requireLinks , issueConstraints.atLeastOne , verifyAllLinkedIssues.yes]
	addTransitionFunction(transition, 'condition', info?.isCloud ? cloud : server, functionKey)
}

['Verify_Issue_constraints_min_two_linkByRelatesTo'].each {
	def server = ["selectedLinkType=$linkByRelatesTo" , linkedIssuesMode.requireLinks , issueConstraints.minTwo , verifyAllLinkedIssues.yes]
	if(!isCloud){
		addTransitionFunction(it , 'condition', server, functionKey)
	}
}

['Verify_Issue_constraints_max_two_linkByRelatesTo'].each {
	def server = ["selectedLinkType=$linkByRelatesTo", linkedIssuesMode.requireLinks, issueConstraints.maxTwo, verifyAllLinkedIssues.yes]
	if(!isCloud){
		addTransitionFunction(it , 'condition', server, functionKey)
	}
}

['Verify_Issue_constraints_min_three_max_six_linkByRelatesTo'].each {
	def server =  ["selectedLinkType=$linkByRelatesTo", linkedIssuesMode.requireLinks, issueConstraints.atLeastThreeAndAtMostSix , verifyAllLinkedIssues.yes]
	if(!isCloud){
		addTransitionFunction(it , 'condition', server, functionKey)
	}
}

['Verify_Issue_constraints_min_two_max_two_linkByRelatesTo'].each {
	def server = ["selectedLinkType=$linkByRelatesTo", linkedIssuesMode.requireLinks , issueConstraints.minTwoMaxTwo , verifyAllLinkedIssues.yes]
	if(!isCloud){
		addTransitionFunction(it , 'condition', server, functionKey)
	}
}

['verify_condition_on_related_issues_checkAssignee'].each {
	def cloud = "{\"selectedLinkTypeId\":\"10003\",\"selectedLinkTypeDirection\":\"outward\",\"selectedIssueTypeId\":\"\",\"anyOrEvery\":\"any\",\"condition\":\"issue.assignee.accountId == '$currentUserKey'\",\"validatorMode\":\"requireLinks\",\"expression\":\"(issue.links.some(issueLink => issueLink.type.id == 10003 && (issueLink.direction == 'outward' || issueLink.type.inward == issueLink.type.outward) && (issue.assignee.accountId == '$currentUserKey')))\"}"
	def server = ["selectedLinkType=$linkByRelatesTo", linkedIssuesMode.requireSpecificLinkedIssues, issueConstraints.atLeastOne, verifyAllLinkedIssues.yes]
	addTransitionFunction(it , 'condition', info?.isCloud ? cloud : server, functionKey)
}

checkRelatedIssue.eachWithIndex { key, value, i ->
	def transition = 'verify_check_related_issues_' + key
	def cloud =  value
	def server =  ["selectedLinkType=$value" ,linkedIssuesMode.checkLinks , issueConstraints.atLeastOne ,verifyAllLinkedIssues.yes]
	addTransitionFunction( transition, 'condition', info?.isCloud ? cloud : server, functionKey)
}

forbidRelatedIssue.eachWithIndex { key, value, i ->
	def transition = 'forbid_certain_related_issues_' + key
	def cloud = value
	def server =  ["selectedLinkType=$value" , linkedIssuesMode.forbidLinks , issueConstraints.atLeastOne , verifyAllLinkedIssues.yes]
	addTransitionFunction( transition, 'condition', info?.isCloud ? cloud : server, functionKey)
}

createWorkflowScheme()
createProject()

def relatesToIssue2 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue2')
def relatesToIssue3 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue3')
def relatesToIssue4 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue4')
def relatesToIssue5 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue5')
def relatesToIssue6 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue6')
def relatesToIssue7 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue7')

def transitionByUserTaskForError =  { transition, userId, issue, expected ->
	if(!isCloud) {
		gint.taskHelper.add(
				[expected    : expected,
				 name        : ":transition issue by non admin user to check error:" + transition,
				 cmd         : /acli $userId -a transitionIssue --issue $issue --transition $transition/,
				]
		)
	}
}

def transitionByUserTaskForSuccess =  { transition, userId, issue, expected ->
	if(!isCloud) {
		gint.taskHelper.add(
				[expected    : expected,
				 name        : ":transition issue by non admin user to check success:" + transition,
				 cmd         : /acli $userId -a transitionIssue --issue $issue --transition $transition/,
				]
		)
	}
}

//                                      RELATED_ISSUES_CONDITION => REQUIRE CERTAIN RELATED ISSUES

// Create issues
def defaultIssue = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'default')
def parent = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'parent')
def subtask = createIssue([type: 'Sub-task', summary: 'JMWE_Issue', parent: { ->parent[] }], 'Sub-task')
def epic = createIssue([type: 'Epic', summary: 'JMWE_Issue', field: "Epic Name", value: "JMWE_Issue"], 'Epic')
def issueBelongsToEpic = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'BelongsToEpic')
def initiative = createIssue([type: 'Initiative', summary: 'JMWE_Issue'], 'Initiative')
def epic_initiative = createIssue([type: 'Epic', summary: 'JMWE_Issue', field: "Epic Name", value: "JMWE_Issue"], 'Epic_initiative')
def issueLinks = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'issueLinks')
def toIssueLink = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'toIssueLink')
def jqlIssue = createIssue([type: 'Task', summary: 'JQL_ISSUE'], 'jqlIssue')

// RELATED_ISSUES_CONDITION_TC_14-verify require certain related issues and subtask of the current issue

[
		'verify_require_certain_related_issues_subtask',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 sleep: info?.isCloud? 5000 : 500,
			 ext       : ":RELATED_ISSUES_CONDITION_TC_14_Case_01 -$it _when issue having one subtask:",
			 expected  : 0,
			 parameters: [
					 issue     : {->parent[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 sleep: info?.isCloud? 5000 : 500,
			 ext       : ":RELATED_ISSUES_CONDITION_TC_14_Case_02 -$it _when issue not having subtask:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}
// RELATED_ISSUES_CONDITION_TC_14-verify require certain related issues and subtask of the current issue_by non admin user
transitionByUserTaskForError('verify_require_certain_related_issues_subtask', testUser, {->defaultIssue[]}, -1)
transitionByUserTaskForSuccess('verify_require_certain_related_issues_subtask', testUser, {->parent[]}, 0)

// RELATED_ISSUES_CONDITION_TC_17-verify require certain related issues_issueBelongsToEpic
[
		'verify_require_certain_related_issues_issueBelongsToEpic',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 sleep: info?.isCloud? 5000 : 500,
			 expected  : -1,
			 ext       : ":RELATED_ISSUES_CONDITION_TC_17_Case_01 -$it _when epic not having issueBelongsToEpic:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it
			 ]
			],
			[action: 'updateIssue',
			 ext: ": add child issue to epic_to check _$it :",
			parameters: [
			        issue: {->issueBelongsToEpic[]},
					field: "Epic Link",
					value: {->epic[]}
			],
			],
			[action    : 'transitionIssue',
			 sleep: info?.isCloud? 5000 : 500,
			 expected  : 0,
			 ext       : ":RELATED_ISSUES_CONDITION_TC_17_Case_02 -$it _when epic having one issueBelongsToEpic:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_21-verify require certain related issues_child issue in the Portfolio hierarchy
[
		'verify_require_certain_related_issues_childPortfolio',
].collect {
	if(!isCloud) {
		gint.taskHelper.add("Validate that current issue must have atleast one child issue in portfolio hierarchy",[
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_21_Case_01 -$it _when current issue not having child issues in the Portfolio hierarchy:",
				 expected  : -1,
				 parameters: [
						 issue     : { -> initiative[] },
						 transition: it,
				 ]
				],
				[action: 'updateIssue',
				 ext: ": add child issue to initiative check _$it :",
				 parameters: [
						 issue: {->epic_initiative[]},
						 field: "Parent Link",
						 value: {->initiative[]}
				 ]
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_21_Case_02 -$it _current issue have one child issue in the Portfolio hierarchy:",
				 expected  : 0,
				 parameters: [
						 issue     : { -> initiative[] },
						 transition: it,
				 ]
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TC_26-verify require certain related issues_current issue must have at least 1 issues linked to it through any link type
[
		'verify_require_certain_related_issues_linkByAnyLink',
].collect {
	gint.taskHelper.add("$it",[
			[action: 'getLinkList',
			 ext: ": validate that issue has 0 issue linked to it through any link type for _ $it: ",
			 parameters: [
					 issue: {->issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:blocks"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("0 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_26_Case_01 -$it _current issue not having issues linked to it through any link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
	[action: 'linkIssue', ext: ": check 1 issue linked by any link type to check _$it:",
	 parameters: [
			 issue: {->issueLinks[]},
			 toIssue: {-> toIssueLink[]},
			 link: 'blocks'
	 ]
	],
	[action: 'getLinkList',
	 ext: ": validate the issue has 1 issue linked through any link for _ $it: ",
	 parameters: [
			 issue: {->issueLinks[]},
			 outputType: "Text",
			 columns: "Link Description",
			 select: "Link Description:blocks"
	 ],
	 finalClosure: { Task task ->
		 def output = "$task.outData"
		 assert output.contains("1 links for issue")
	 }
	],
	[action    : 'transitionIssue',
	 ext       : ":RELATED_ISSUES_CONDITION_TC_26_Case_02 -$it _current issue having one issue linked to it through any link type:",
	 expected  : 0,
	 parameters: [
			 issue     : {->issueLinks[]},
			 transition: it ,
	 ]
	],
	[action: 'deleteLink',
	 ext: ": by blocks link type after checking _$it:",
	 parameters: [
			 issue: {->issueLinks[]},
			 toIssue: {-> toIssueLink[]},
			 link: 'blocks'
	 ]
	],])
}

// RELATED_ISSUES_CONDITION_TC_27-verify require certain related issues_current issue must have at least 1 issues linked to it through the blocks link type
[
		'verify_require_certain_related_issues_linkByBlock',
].collect {
	gint.taskHelper.add("$it",[
			[action: 'getLinkList',
			 ext: ": validate that issue has 0 issues linked to it through blocks link type for _ $it: ",
			 parameters: [
					 issue: {->issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:blocks"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("0 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_27_Case_01 -$it _The current issue not having issues linked to it through the blocks link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'linkIssue', ext: ": by blocks link type to check _$it:",
			 parameters: [
					 issue: {->issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'blocks'
			 ]
			],
			[action: 'getLinkList',
			 ext: ": validate the issue has 1 issue linked through specific link for _ $it: ",
			 parameters: [
					 issue: {->issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:blocks"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("1 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_27_Case_02 -$it _when current issue have at least 1 issue linked to it through the blocks link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'deleteLink',
			 ext: ": by blocks link type after checking _$it:",
			 parameters: [
					 issue: {->issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'blocks'
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_29-verify require certain related issues_current issue must have at least 1 issues linked to it through the is blocked by link type
[
		'verify_require_certain_related_issues_linkByisBlockedBy',
].collect {
	gint.taskHelper.add("$it",[
			[action: 'getLinkList',
			 ext: ": validate that issue has 0 issue linked to it through is blocked by link type for _ $it: ",
			 parameters: [
					 issue: {-> issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:is blocked by"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("0 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_29_Case_01 -$it _when current issue not having issues linked to it through the is blocked by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'linkIssue', ext: ": by blocks link type to check _$it:",
			 parameters: [
					 issue: {->toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: 'blocks'
			 ]
			],
			[action: 'getLinkList',
			 ext: ": validate that issue has 1 issue linked to it through is blocked by link type for _ $it: ",
			 parameters: [
					 issue: {-> issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:is blocked by"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("1 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_29_Case_02 -$it _when current issue have 1 issue linked to it through the is blocked by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'deleteLink',
			 ext: ": by blocks link type after checking _$it:",
			 parameters: [
					 issue: {->toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: 'blocks'
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_31-verify require certain related issues_current issue must have at least 1 issues linked to it through the clones link type
[
		'verify_require_certain_related_issues_linkByClones',
].collect {
	def clonesLink = info?.isCloud ? 'clones' : clonesLinkType
	gint.taskHelper.add("$it",[
			[action: 'getLinkList',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": validate that issue has 0 issue linked to it through $clonesLink link type for _ $it: ",
			 parameters: [
					 issue: {-> issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:$clonesLink"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("0 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 sleep: info?.isCloud? 5000 : 500,
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_01 -$it _when current issue not have issues linked to it through the clones link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'linkIssue', ext: ": by clones link type to check _$it:",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: clonesLink
			 ]
			],
			[action: 'getLinkList',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": validate that issue has 1 issue linked to it through clones link type for _ $it: ",
			 parameters: [
					 issue: {-> issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:$clonesLink"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("1 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_02 -$it _when current issue have issue linked to it through the clones link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'deleteLink',
			 ext: ": by clones link type after checking _$it:",
			 parameters: [
					 issue: {->issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: clonesLink
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_32-verify require certain related issues_current issue must have at least 1 issues linked to it through the is cloned by link type
[
		'verify_require_certain_related_issues_linkByIsClonedBy',
].collect {
	def clonesLink = info?.isCloud ? 'clones' : clonesLinkType
	gint.taskHelper.add("$it",[
			[action: 'getLinkList',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": validate that issue has 0 issue linked to it through is $clonesLink by link type for _ $it: ",
			 parameters: [
					 issue: {->toIssueLink[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:$clonesLink"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("0 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_01 -$it _when current issue not having issues linked to it through the is cloned by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {-> issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'linkIssue',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": by is cloned by link type to check _$it:",
			 parameters: [
					 issue: {-> toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: clonesLink
			 ]
			],
			[action: 'getLinkList',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": validate that issue has 1 issue linked to it through is $clonesLink by link type for _ $it: ",
			 parameters: [
					 issue: {-> toIssueLink[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:$clonesLink"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("1 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_02 -$it _when current issue have issue linked to it through the is cloned by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {-> issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'deleteLink',
			 ext: ": by clones link type after checking _$it:",
			 parameters: [
					 issue: {->toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: clonesLink
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_33-verify require certain related issues_current issue must have at least 1 issues linked to it through the duplicates link type
[
		'verify_require_certain_related_issues_linkByDuplicates',
].collect {
	gint.taskHelper.add("$it",[
			[action: 'getLinkList',
			 ext: ": validate that issue has 0 issue linked to it through duplicates link type for _ $it: ",
			 parameters: [
					 issue: {->issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:duplicates"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("0 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_02 -$it _when current issue not having issues linked to it through the duplicates link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'linkIssue',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": by duplicates link type to check _$it:",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'duplicates'
			 ]
			],
			[action: 'getLinkList',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": validate that issue has 1 issue linked to it through duplicates link type for _ $it: ",
			 parameters: [
					 issue: {->issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:duplicates"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("1 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_01 -$it _when current issue have issue linked to it through the duplicates link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'deleteLink',
			 ext: ": by duplicates link type after checking _$it:",
			 parameters: [
					 issue: {->issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'duplicates'
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_34-verify require certain related issues_current issue must have at least 1 issues linked to it through the is duplicated by link type
[
		'verify_require_certain_related_issues_linkByIsDuplicatedBy',
].collect {
	gint.taskHelper.add("$it",[
			[action: 'getLinkList',
			 ext: ": validate that issue has 0 issue linked to it through is duplicated by link type for _ $it: ",
			 parameters: [
					 issue: {->issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:is duplicated by"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("0 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_34_Case_02 -$it _when current issue not having issues linked to it through the is duplicated by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'linkIssue',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": by duplicates link type to check _$it:",
			 parameters: [
					 issue: {-> toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: 'duplicates'
			 ]
			],
			[action: 'getLinkList',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": validate that issue has 1 issue linked to it through is duplicated by link type for _ $it: ",
			 parameters: [
					 issue: {->issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:is duplicated by"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("1 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_34_Case_01 -$it _when current issue have issue linked to it through the is duplicated by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'deleteLink',
			 ext: ": by duplicates link type after checking _$it:",
			 parameters: [
					 issue: {->toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: 'duplicates'
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_37-verify require certain related issues_current issue must have at least 1 issues linked to it through the relates to link type
[
		'verify_require_certain_related_issues_linkByRelatesTo',
].collect {
	gint.taskHelper.add("$it",[
			[action: 'getLinkList',
			 ext: ": validate that issue has 0 issue linked to it through relates to link type for _ $it: ",
			 parameters: [
					 issue: {->issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:relates to"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("0 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_37_Case_02 -$it _when current issue not having issues linked to it through the relates to link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'linkIssue',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": by relates to link type to check _$it:",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'relates to'
			 ]
			],
			[action: 'getLinkList',
			 sleep: info?.isCloud? 5000 : 500,
			 ext: ": validate that issue has 1 issue linked to it through relates to link type for _ $it: ",
			 parameters: [
					 issue: {->issueLinks[]},
					 outputType: "Text",
					 columns: "Link Description",
					 select: "Link Description:relates to"
			 ],
			 finalClosure: { Task task ->
				 def output = "$task.outData"
				 assert output.contains("1 links for issue")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_37_Case_01 -$it _when current issue have issue linked to it through the relates to link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'deleteLink',
			 ext: ": by relates To link type after checking _$it:",
			 parameters: [
					 issue: {->issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'relates to'
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_38-verify require certain related issues_The following Groovy expression:issue.getLinkedIssues() must return at least 1 issues
[
		'verify_require_certain_related_issues_returnsByGroovyExpression',
].collect {
	if(!isCloud) {
		gint.taskHelper.add("$it",[
				[action: 'getLinkList',
				 ext: ": validate that issue has 0 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("0 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_38_Case_02 -$it _The following Groovy expression:$returnsLinkedIssues not returns issues:",
				 expected  : -1,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action: 'linkIssue',
				 ext: ": by relates to link type to check _$it:",
				 parameters: [
						 issue: {-> issueLinks[]},
						 toIssue: {-> toIssueLink[]},
						 link: 'relates to'
				 ]
				],
				[action: 'getLinkList',
				 ext: ": validate that issue has 1 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("1 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_38_Case_01 -$it _when the following Groovy expression:$returnsLinkedIssues return at least 1 issue:",
				 expected  : 0,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action: 'deleteLink',
				 ext: ": by relates To link type after checking _$it:",
				 parameters: [
						 issue: {-> issueLinks[]},
						 toIssue: {-> toIssueLink[]},
						 link: 'relates to'
				 ]
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TC_40-verify require certain related issues_The following JQL search:issuetype = Task and summary~JQL_ISSUE must return at least 1 issues
[
		'verify_require_certain_related_issues_returnsFromJqlSearch',
].collect {
	if(!isCloud) {
		gint.taskHelper.add("$it",[
				[action: 'getIssueList', ext: ": validate that jql expression_ $jqlSearchExpression _must return at least one issue_and check $it: ",
				parameters:[
				        jql: jqlSearchExpression
				],
						finalClosure: {Task task ->
							def output = "$task.outData"
							assert output.contains("1 issues in list")
						}
				],
				]
		)
		gint.taskHelper.add([
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_40_Case_01 -$it _when the following JQL search:$jqlSearchExpression return 1 issue:",
				 expected  : 0,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue',
				 ext       : ":change the issue type to check when jql search not returns any issues for:" + it,
				 sleepAfter: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue    : { -> jqlIssue[] },
						 issueType: "Bug",
				 ]
				],
				[action: 'getIssueList', ext: ": validate that jql expression_ $jqlSearchExpression _should not return any issue_ check $it: ",
				 parameters:[
						 jql: jqlSearchExpression
				 ],
				 finalClosure: {Task task ->
					 def output = "$task.outData"
					 assert output.contains("0 issues in list")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_40_Case_02 -$it _The following JQL search:$jqlSearchExpression must return at least 1 issues:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue',
				 ext       : ":change the issue type after checking when jql search not returns any issues for:" + it,
				 sleepAfter: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue    : { -> jqlIssue[] },
						 issueType: "Task",
				 ]
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TC_42_Case_01-verify require certain related issues_The current issue must have at least 2 issues linked to it through the relates to link type
[
		'Verify_Issue_constraints_min_two_linkByRelatesTo'
].collect {
	if(!isCloud) {
		gint.taskHelper.add([
				[action: 'getLinkList',
				 ext: ": validate that issue has 0 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("0 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_42_Case_01 _$it _when current issue not having at least 2 issues linked to it through the relates to link type:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'linkIssue',
				 ext: ": 1 by relates to link type to check _$it _min issue constraints option:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue2[] },
						 link   : 'relates to'
				 ]
				],
				[action    : 'linkIssue',
				 ext: ": 2 by relates to link type to check _$it _min issue constraints option:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue3[] },
						 link   : 'relates to'
				 ]
				],
				[action: 'getLinkList',
				 ext: ": validate that issue has 2 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("2 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_42_Case_02 _$it _when current issue having at least 2 issues linked to it through the relates to link type:",
				 expected  : 0,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'deleteLink',
				 ext: ": 1 by relates to link type after checking _$it _min issue constraints option:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue2[] },
						 link   : 'relates to'
				 ]
				],
				[action    : 'deleteLink',
				 ext: ": 2 by relates to link type after checking _$it _min issue constraints option:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue3[] },
						 link   : 'relates to'
				 ]
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TC_43_Case_01-verify require certain related issues_The current issue must not have more than 2 issues linked to it through the relates to link type
[
		'Verify_Issue_constraints_max_two_linkByRelatesTo'
].collect {
	if(!isCloud) {
		gint.taskHelper.add([
				[action: 'getLinkList',
				 ext: ": validate that issue has 0 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("0 links for issue")
				 }
				],
				[action    : 'linkIssue',
				 ext: ": 1 by relates to link type to $it _check max issue constraints option:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> toIssueLink[] },
						 link   : 'relates to'
				 ]
				],
				[action: 'getLinkList',
				 ext: ": validate that issue has 1 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("1 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_43_Case_01 _$it _when current issue not having more than 2 issues linked to it through the relates to link type:",
				 expected  : 0,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'linkIssue', ext: ": 2nd issue link by relates to link to check_ $it  _min_issue constraints:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue2[] },
						 link   : 'relates to'
				 ]
				],
				[action    : 'linkIssue',
				 ext: ': 3rd issue linked to check max_issue constraints:',
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue3[] },
						 link   : 'relates to'
				 ]
				],
				[action: 'getLinkList',
				 ext: ": validate that issue has 3 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("3 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_43_Case_02 _$it _when current issue having more than 3 issues linked to it through the relates to link type:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'deleteLink',
				 ext: ": 1 by relates to link type to $it _check max issue constraints option:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> toIssueLink[] },
						 link   : 'relates to'
				 ]
				],
				[action    : 'deleteLink', ext: ":2 issues linked to check_ $it max_issue constraints:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue2[] },
						 link   : 'relates to'
				 ]
				],
				[action    : 'deleteLink', ext: ": issues linked to check_ $it _max_issue constraints:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue3[] },
						 link   : 'relates to'
				 ]
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TC_44- The current issue must have at least 3 and at most 6 issues linked to it through the relates to link type
[
		'Verify_Issue_constraints_min_three_max_six_linkByRelatesTo'
].collect {
	if(!isCloud) {
		gint.taskHelper.add([
				[action: 'getLinkList',
				 ext: ": validate that issue has 0 issue linked to it through relates to link type for _ $it _case_01: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("0 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_44_Case_01 _$it _when current issue not have at least 3 and at most 6 issues linked to it through the relates to link type:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'linkIssue',
				 ext: ": 1 by relates to link type to $it _check max issue constraints option:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> toIssueLink[] },
						 link   : 'relates to'
				 ]
				],
				[action    : 'linkIssue', ext: ": 2 by relates to link type to check min and max issue constraints option:" + it,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue2[] },
						 link   : 'relates to'
				 ]
				],
				[action    : 'linkIssue', ext: ": 3 by relates to link type to check min and max issue constraints option2:" + it,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue3[] },
						 link   : 'relates to'
				 ]
				],
				[action: 'getLinkList',
				 ext: ": validate that issue has 3 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("3 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_44_Case_02 _$it _when current issue having at least 3 issues linked to it through the relates to link type:",
				 expected  : 0,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'deleteLink',
				 ext: ": 1 by relates to link type to $it _ after checking max issue constraints option:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> toIssueLink[] },
						 link   : 'relates to'
				 ]
				],
				[action    : 'deleteLink', ext: ": 2 by relates to link type after checking min and max issue constraints option:" + it,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue2[] },
						 link   : 'relates to'
				 ]
				],
				[action    : 'deleteLink', ext: ": 3 by relates to link type after checking min and max issue constraints option2:" + it,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue3[] },
						 link   : 'relates to'
				 ]
				],
		])
	}
}

// link the issues to check the issue constraint options for max 6 issues by relates to link type
def relatesToIssuesList = [
		issue2 : {->relatesToIssue2[]},
		issue3 : {->relatesToIssue3[]},
		issue4 : {->relatesToIssue4[]},
		issue5 : {->relatesToIssue5[]},
		issue6 : {->relatesToIssue6[]},
		issue7 : {->relatesToIssue7[]}
]

relatesToIssuesList.eachWithIndex { key, value, i ->
	if(!isCloud) {
		gint.taskHelper.add(
				[action    : 'linkIssue',
				 ext       : ": by duplicates link type to check max issue constraints option:" + key,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: value,
						 link   : 'duplicates'
				 ],
				])
	}
}

[
		'Verify_Issue_constraints_min_three_max_six_linkByRelatesTo'
].collect {
	if(!isCloud) {
		gint.taskHelper.add([
				[action: 'getLinkList',
				 ext: ": validate that issue has 0 issue linked to it through relates to link type for _ $it _case_02: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("0 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_44_Case_03 _$it _when current issue more than 6 ie 7 issues linked to it through the duplicates link type:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
		])
	}
}

transitionByUserTaskForSuccess('Verify_Issue_constraints_min_three_max_six_linkByRelatesTo', testUser, {->issueLinks[]}, -1)


// delete link between issues to while check the issue constraint options for max 6 issues by relates to link type
relatesToIssuesList.eachWithIndex { key, value, i ->
	if(!isCloud) {
		gint.taskHelper.add(
				[action    : 'deleteLink',
				 ext       : ": by duplicates link type to check max issue constraints option:" + key,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: value,
						 link   : 'duplicates'
				 ],
				])
	}
}

relatesToIssuesList.eachWithIndex { key, value, i ->
	if(!isCloud) {
		gint.taskHelper.add(
				[action    : 'linkIssue',
				 ext       : ": by relates to link type to check max issue constraints option:" + key,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: value,
						 link   : 'relates to'
				 ],
				])
	}
}

[
		'Verify_Issue_constraints_min_three_max_six_linkByRelatesTo'
].collect {
	if(!isCloud) {
		gint.taskHelper.add([
				[action: 'getLinkList',
				 ext: ": validate that issue has 6 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("6 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_44_Case_04 _$it _when current issue have 6  issues linked to it through the relates to link type:",
				 expected  : 0,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'linkIssue',
				 ext: ": 7th issue by relates to link type to check_ $it _max issue constraints option:" ,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { ->toIssueLink[] },
						 link   : 'relates to'
				 ],
				],
				[action: 'getLinkList',
				 ext: ": validate that issue has 7 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("7 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_44_Case_04 _$it _when current issue have at 7 issues linked to it through the relates to link type:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TC_14-verify require certain related issues and subtask of the current issue_by non admin user
transitionByUserTaskForError('Verify_Issue_constraints_min_three_max_six_linkByRelatesTo', testUser, {->defaultIssue[]}, -1)

if(!isCloud) {
	gint.taskHelper.add(
			[action    : 'deleteLink',
			 ext       : ": 7th issue linked by relates to link type to check max issue constraints option:",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue  : { -> toIssueLink[] },
					 toIssue: { -> issueLinks[] },
					 link   : 'relates to',
			 ],
			]
	)
}

// delete link between issues while check the issue constraint options for max 6 issues by relates to link type
relatesToIssuesList.eachWithIndex { key, value, i ->
	if(!isCloud) {
		gint.taskHelper.add(
				[action    : 'deleteLink',
				 ext       : ": by relates to link type to check max issue constraints option:" + key,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: value,
						 link   : 'relates to'
				 ],
				])
	}
}

// RELATED_ISSUES_CONDITION_TS- The current issue must have at least 2 and at most 2 issues linked to it through the relates to link type
[
		'Verify_Issue_constraints_min_two_max_two_linkByRelatesTo'
].each {
	if(!isCloud) {
		gint.taskHelper.add([
				[action: 'getLinkList',
				 ext: ": validate that issue has 0 issue linked to it through relates to link type for _ $it _case_02: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("0 links for issue")
				 }
				],
		]
		)
		gint.taskHelper.add([
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_ TC_01_Case_01 _$it _when current issue not have at least 2 and at most 2 issues linked to it through the relates to link type:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'linkIssue',
				 ext: ": by relates to link type to check $it _ link 1st issue:" ,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue2[] },
						 link   : 'relates to'
				 ],
				],
				[action    : 'linkIssue',
				 ext: ": by relates to link type to check $it _ link 2nd issues:" ,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue3[] },
						 link   : 'relates to'
				 ],
				],
				[action: 'getLinkList',
				 ext: ": validate that issue has 2 issue linked to it through relates to link type for _ $it _case_02: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("2 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_TC_01_Case_02 _$it _when current issue have 2 issues linked to it through the relates to link type:",
				 expected  : 0,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'linkIssue',
				 ext: ": by relates to link type to check $it _link 3rd issue:" ,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue4[] },
						 link   : 'relates to'
				 ],
				],
				[action: 'getLinkList',
				 ext: ": validate that issue has 3 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("3 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_TC_01_Case_03 _$it _when current issue have more than 2 issues linked to it through the relates to link type:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'deleteLink',
				  ext: ": by relates to link type to check _$it min 2 issue and max 2 link constraints option1:",
				  parameters: [
						  issue  : { -> issueLinks[] },
						  toIssue: { ->relatesToIssue2[] },
						  link   : 'relates to'
				  ],],
				[action    : 'deleteLink',
				 ext: ": by relates to link type to check _$it min 2 issue and max 2 link constraints option2:" ,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { ->relatesToIssue3[] },
						 link   : 'relates to'
				 ],
				],
				[action    : 'deleteLink',
				 ext: ": by relates to link type to _$it _check min 2 issue and max 2 link constraints option3:" ,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { ->relatesToIssue4[] },
						 link   : 'relates to'
				 ],
				]
		])
	}
}

// RELATED_ISSUES_CONDITION_TS- The current issue must have at least 2 and at most 2 issues linked to it through the relates to link type
[
		'Verify_Issue_constraints_min_two_max_two_linkByRelatesTo'
].each {
	if(!isCloud) {
		gint.taskHelper.add([
				[action: 'getLinkList',
				 ext: ": validate that issue has 0 issue linked to it through duplicates link type for _ $it _case_01: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:duplicates"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("0 links for issue")
				 }
				],
		]
		)
		gint.taskHelper.add([
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_TC_02_Case_01 _$it _when current issue not have linked min 2 and max 2 linked issues:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'linkIssue',
				 ext: ": by duplicates link type to check $it _ link 1st issue:" ,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue2[] },
						 link   : 'duplicates'
				 ],
				],
				[action    : 'linkIssue',
				 ext: ": by duplicates link type to check $it _ link 2nd issue:" ,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue3[] },
						 link   : 'duplicates'
				 ],
				],
				[action: 'getLinkList',
				 ext: ": validate that issue has 2 issue linked to it through duplicates link type for _ $it _case _01: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:duplicates"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("2 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_TC_02_Case_02 _$it _when current issue have 2 issues linked to it through the duplicates link type:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'linkIssue',
				 ext: ": by relates to link type to check $it _link 1st issue:" ,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue2[] },
						 link   : 'relates to'
				 ],
				],
				[action    : 'linkIssue',
				 ext: ": by relates to link type to check $it _link 2nd issue:" ,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue3[] },
						 link   : 'relates to'
				 ],
				],
				[action: 'getLinkList',
				 ext: ": validate that issue has 2 issue linked to it through relates to link type for _ $it: ",
				 parameters: [
						 issue: {->issueLinks[]},
						 outputType: "Text",
						 columns: "Link Description",
						 select: "Link Description:relates to"
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("2 links for issue")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_02_Case_03 _$it _when current issue have more than 2 issues linked to it through the duplicates link type:",
				 expected  : 0,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'deleteLink',
				 ext: ": by duplicates link type to check _ $it _min 2 issue and max 2 link constraints option1:",
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { ->relatesToIssue2[] },
						 link   : 'duplicates'
				 ],],
				[action    : 'deleteLink',
				 ext: ": by duplicates link type to check _$it _min 2 issue and max 2 link constraints option2:" ,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { ->relatesToIssue3[] },
						 link   : 'duplicates'
				 ],
				],
				[action    : 'deleteLink',
				 ext: ": by relates to link type to check _$it _unlink 1st issue:" ,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue2[] },
						 link   : 'relates to'
				 ],
				],
				[action    : 'deleteLink',
				 ext: ": by relates to link type to check $it _unlink 2nd issue:" ,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> relatesToIssue3[] },
						 link   : 'relates to'
				 ],
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TC_49 - current issue must have at least 1 and at most 0 issues linked to it through the relates to link type, and at least one of them must respect the following condition
[
		'verify_condition_on_related_issues_checkAssignee'
].each {
		gint.taskHelper.add([
				[action    : 'linkIssue',
				 ext       : ": by relates to link type to check $it _link 1st issue:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> toIssueLink[] },
						 link   : 'relates to'
				 ],
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_49_Case_01 -$it _when current issue not having at least 1 issues linked to it through the relates to link type which respect the following condition_issue must have assignee $testUser:",
				 expected  : -1,
				 sleep     : info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'assignIssue',
				 ext       : ": linked issue to _ $user to_ $it :",
				 sleepAfter: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> toIssueLink[] },
						 assignee: user,
				 ],
				],
				[action    : 'assignIssue',
				 ext       : ": current issue to_ $user to_ $it :",
				 sleepAfter: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> issueLinks[] },
						 assignee: user,
				 ],
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TC_49_Case_02 -$it _when current issue having at least 1 issues linked to it through the relates to link type which respect the following condition_issue must have assignee $testUser:",
				 expected  : 0,
				 sleep     : info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'assignIssue', ext: ": to _ UNASSIGNED issue- after_ $it :",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> toIssueLink[] },
						 assignee: " ",
				 ],
				],
				[action    : 'deleteLink',
				 ext       : ": by relates to link type to check $it _link 1st issue:",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> toIssueLink[] },
						 link   : 'relates to'
				 ],
				],
		])
}

//                                          RELATED_ISSUES_CONDITION => CHECK RELATED ISSUES TESTS

// RELATED_ISSUES_CONDITION_TS_51 -verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_subtask',
].collect {
	gint.taskHelper.add([
			[action: 'updateIssue',
			 ext: ":  change issue priority to low satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->parent[]},
					 priority: "Low",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the parent issue does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->parent[]},
					 field: "Priority",
			 ],
					finalClosure: {Task task ->
						def output = "$task.outData"
						assert !output.contains("Priority  . . . . . . . . . . : High")
					}
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_01_Case_01 -$it _when issue having subtask not respecting given condition :",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->parent[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ":  change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->parent[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the parent issue have High priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->parent[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_01_Case_02 -$it _when issue having subtask respecting given condition:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->parent[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to low satisfy the criteria after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->parent[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_02-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_issueBelongsToEpic',
].collect {
	gint.taskHelper.add([
			[action: 'getFieldValue',
			 ext: ": Validate that the parent issue does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->epic[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
	]
	)
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_02_Case_01 -$it _when epic having issueBelongsToEpic not respecting condition:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it
			 ]
			],
			[action: 'updateIssue', ext: ":  change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->epic[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the parent issue have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->epic[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_02_Case_02 -$it _when epic having issueBelongsToEpic respecting condition:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->epic[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_03-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_childPortfolio',
].collect {
	if(!isCloud) {
		gint.taskHelper.add([
				[action: 'getFieldValue',
				 ext: ": Validate that the initiative does not have high priority: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue: {->epic[]},
						 field: "Priority",
				 ],
				 finalClosure: {Task task ->
					 def output = "$task.outData"
					 assert !output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
		]
		)
		gint.taskHelper.add([
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_03_Case_01 -$it _when parent issue not having issues child issues in portfolio hierarchy respecting given condition:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> initiative[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> initiative[] },
						 priority: "High",
				 ]
				],
				[action: 'getFieldValue',
				 ext: ": Validate that the initiative have high priority: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue: {->initiative[]},
						 field: "Priority",
				 ],
				 finalClosure: {Task task ->
					 def output = "$task.outData"
					 assert output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_03_Case_02 -$it _when parent issue having issues child issues in portfolio hierarchy respecting given condition:",
				 expected  : 0,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> initiative[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue', ext: ": change issue priority to low after checking: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> initiative[] },
						 priority: "Low",
				 ]
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TS_51_TC_04-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByAnyLink',
].collect {
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			parameters: [
			        issue: {-> issueLinks[]},
					toIssue: {-> toIssueLink[]},
					link: 'blocks',
			]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through any link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_04_Case_01 -$it _current issue not having issue linked to it through any link type which respect given condition:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through any link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_04_Case_02 -$it _current issue having issue linked to it through any link type which respect given condition:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": linked issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'blocks',
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_05-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByBlock',
].collect {
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'blocks',
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through any link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_01 -$it _when current issue not having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through any link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_02 -$it _when current issue having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": linked issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'blocks',
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_06-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByisBlockedBy',
].collect {
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: 'blocks',
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through is blocked by link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_06_Case_01 -$it _when current issue have 1 issue linked to it through the is blocked by link type:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through is blocked by link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_06_Case_02 -$it _when current issue not having issues linked to it through the is blocked by link type:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks []},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": linked issues to check _$it :",
			 parameters: [
					 issue: {-> toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: 'blocks',
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_07-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByClones',
].collect {
	def clonesLink = info?.isCloud ? 'clones' : clonesLinkType
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: clonesLink,
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through clones link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_07_Case_01 -$it _when current issue have issue linked to it through the clones link type_not respecting given condition:",
			 expected: -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleepAfter: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through clones link have high priority: $it",
			 sleepAfter: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_07_Case_02 -$it _when current issue not have issues linked to it through the clones link type_respecting given condition:",
			 expected: 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleepAfter: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: clonesLink,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_08-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByIsClonedBy',
].collect {
	def clonesLink = info?.isCloud ? 'clones' : clonesLinkType
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {-> toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: clonesLink,
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through clones link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_07_Case_01 -$it _when current issue have issue linked to it through the clones link type_not respecting given condition:",
			 expected: -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through clones link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_07_Case_02 -$it _when current issue not have issues linked to it through the clones link type_respecting given condition:",
			 expected: 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: clonesLink,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_09-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByDuplicates',
].collect {
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'duplicates',
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through duplicates link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_01 -$it _when current issue not having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through duplicates link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_02 -$it _when current issue having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": linked issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'duplicates',
			 ]
			],
	])
}


// RELATED_ISSUES_CONDITION_TS_51_TC_11-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByRelatesTo',
].collect {
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'relates to',
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through relates to link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_01 -$it _when current issue not having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through relates to link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_02 -$it _when current issue having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": linked issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {->toIssueLink  []},
					 link: 'relates to',
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_12-verify check certain related issues_The following Groovy expression:issue.getLinkedIssues() must return at least 1 issues
[
		'verify_check_related_issues_returnsByGroovyExpression',
].collect {
	if (!isCloud) {
		gint.taskHelper.add([
				[action    : "linkIssue", ext: ": link issues to check _$it :",
				 parameters: [
						 issue  : { -> toIssueLink[] },
						 toIssue: { -> issueLinks[] },
						 link   : 'relates to',
				 ]
				],
				[action      : 'getFieldValue',
				 ext         : ": Validate that the issues link to current issue through relates to link does not have high priority: $it",
				 sleepAfter  : 3000,
				 parameters  : [
						 issue: { -> issueLinks[] },
						 field: "Priority",
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert !output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_01 -$it _when current issue not having at least 1 issue linked to it through the blocks link type_respect given condition:",
				 expected  : -1,
				 sleep     : info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> issueLinks[] },
						 priority: "High",
				 ]
				],
				[action      : 'getFieldValue',
				 ext         : ": Validate that the issues link to current issue through relates to link have high priority: $it",
				 sleepAfter  : 3000,
				 parameters  : [
						 issue: { -> issueLinks[] },
						 field: "Priority",
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_02 -$it _when current issue having at least 1 issue linked to it through the blocks link type_respect given condition:",
				 expected  : 0,
				 sleep     : info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue',
				 ext       : ": change issue priority to Low after checking: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> issueLinks[] },
						 priority: "Low",
				 ]
				],
				[action    : "deleteLink", ext: ": linked issues to check _$it :",
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> toIssueLink[] },
						 link   : 'relates to',
				 ]
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TS_51_TC_13-verify check certain related issues_The following Groovy expression:issue.getLinkedIssues() must return at least 1 issues
[
		'verify_check_related_issues_returnsFromJqlSearch',
].collect {
	if(!isCloud) {
		gint.taskHelper.add([
				[action      : 'getFieldValue',
				 ext         : ": Validate that the issue returns by jql search should not have high priority: $it",
				 sleepAfter  : 3000,
				 parameters  : [
						 issue: { -> defaultIssue[] },
						 field: "Priority",
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert !output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_13_case_01 -$it _when the following JQL search:$jqlSearchExpression return 1 issue:",
				 expected: -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> defaultIssue[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue',
				 ext: ": change issue priority to High for checking: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> defaultIssue[] },
						 priority: "High",
				 ]
				],
				[action      : 'getFieldValue',
				 ext         : ": Validate that the issue returns by jql search should have high priority: $it",
				 sleepAfter  : 3000,
				 parameters  : [
						 issue: { -> defaultIssue[] },
						 field: "Priority",
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_13_Case_02 -$it _The following JQL search:$jqlSearchExpression must return at least 1 issues:",
				 expected: 0,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> defaultIssue[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue',
				 ext: ": change issue priority to Low after checking: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> defaultIssue[] },
						 priority: "Low",
				 ]
				],
		])
	}
}

//                                     RELATED_ISSUES_CONDITION => FORBID CERTAIN RELATED ISSUES

// RELATED_ISSUES_CONDITION_TS_55-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_subtask',
].collect {
	gint.taskHelper.add([
			[action: 'getFieldValue',
			 ext: ": Validate that the parent issue does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->parent[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_01_Case_01 -$it _when issue having subtask not respecting given condition :",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->parent[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ":  change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->parent[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the parent issue have High priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->parent[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_01_Case_02 -$it _when issue having subtask respecting given condition:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->parent[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to low satisfy the criteria after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->parent[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_02-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_issueBelongsToEpic',
].collect {
	gint.taskHelper.add([
			[action: 'getFieldValue',
			 ext: ": Validate that the parent issue does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->epic[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
	]
	)
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_02_Case_01 -$it _when epic having issueBelongsToEpic not respecting condition:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it
			 ]
			],
			[action: 'updateIssue', ext: ":  change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->epic[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the parent issue have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->epic[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_02_Case_02 -$it _when epic having issueBelongsToEpic respecting condition:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->epic[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_03-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_childPortfolio',
].collect {
	if(!isCloud) {
		gint.taskHelper.add([
				[action: 'getFieldValue',
				 ext: ": Validate that the initiative does not have high priority: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue: {->epic[]},
						 field: "Priority",
				 ],
				 finalClosure: {Task task ->
					 def output = "$task.outData"
					 assert !output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
		]
		)
		gint.taskHelper.add([
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_03_Case_01 -$it _when parent issue not having issues child issues in portfolio hierarchy respecting given condition:",
				 expected  : 0,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> initiative[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> initiative[] },
						 priority: "High",
				 ]
				],
				[action: 'getFieldValue',
				 ext: ": Validate that the initiative have high priority: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue: {->initiative[]},
						 field: "Priority",
				 ],
				 finalClosure: {Task task ->
					 def output = "$task.outData"
					 assert output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_03_Case_02 -$it _when parent issue having issues child issues in portfolio hierarchy respecting given condition:",
				 expected  : -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> initiative[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue', ext: ": change issue priority to low after checking: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> initiative[] },
						 priority: "Low",
				 ]
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TS_55_TC_04-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByAnyLink',
].collect {
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'blocks',
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through any link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
	]
	)
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_04_Case_01 -$it _current issue not having issue linked to it through any link type which respect given condition:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through any link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_04_Case_02 -$it _current issue having issue linked to it through any link type which respect given condition:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": linked issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'blocks',
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_05-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByBlock',
].collect {
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'blocks',
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through any link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
	]
	)
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_01 -$it _when current issue not having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through any link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_02 -$it _when current issue having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": linked issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'blocks',
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_06-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByisBlockedBy',
].collect {
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: 'blocks',
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through is blocked by link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
	]
	)
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_06_Case_01 -$it _when current issue have 1 issue linked to it through the is blocked by link type:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through is blocked by link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_06_Case_02 -$it _when current issue not having issues linked to it through the is blocked by link type:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks []},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": linked issues to check _$it :",
			 parameters: [
					 issue: {-> toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: 'blocks',
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_07-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByClones',
].collect {
	def clonesLink = info?.isCloud ? 'clones' : clonesLinkType
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: clonesLink,
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through clones link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
	]
	)
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_07_Case_01 -$it _when current issue have issue linked to it through the clones link type_not respecting given condition:",
			 expected: 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through clones link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_07_Case_02 -$it _when current issue not have issues linked to it through the clones link type_respecting given condition:",
			 expected: -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: clonesLink,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_08-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByIsClonedBy',
].collect {
	def clonesLink = info?.isCloud ? 'clones' : clonesLinkType
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: clonesLink,
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through clones link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
	]
	)
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_07_Case_01 -$it _when current issue have issue linked to it through the clones link type_not respecting given condition:",
			 expected: 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through clones link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_07_Case_02 -$it _when current issue not have issues linked to it through the clones link type_respecting given condition:",
			 expected: -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> toIssueLink[]},
					 toIssue: {-> issueLinks[]},
					 link: clonesLink,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_09-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByDuplicates',
].collect {
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'duplicates',
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through duplicates link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
	]
	)
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_01 -$it _when current issue not having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through duplicates link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_02 -$it _when current issue having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": linked issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'duplicates',
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_11-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByRelatesTo',
].collect {
	gint.taskHelper.add([
			[action: "linkIssue", ext: ": link issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> toIssueLink[]},
					 link: 'relates to',
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through relates to link does not have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert !output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_01 -$it _when current issue not having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : 0,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action: 'getFieldValue',
			 ext: ": Validate that the issues link to current issue through relates to link have high priority: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 field: "Priority",
			 ],
			 finalClosure: {Task task ->
				 def output = "$task.outData"
				 assert output.contains("Priority  . . . . . . . . . . : High")
			 }
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_02 -$it _when current issue having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : -1,
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue',
			 ext: ": change issue priority to Low after checking: $it",
			 sleep: info?.isCloud? 5000 : 500,
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
			[action: "deleteLink", ext: ": linked issues to check _$it :",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {->toIssueLink  []},
					 link: 'relates to',
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_12-verify Forbid certain related issues_The following Groovy expression:issue.getLinkedIssues() must return at least 1 issues
[
		'forbid_certain_related_issues_returnsByGroovyExpression',
].collect {
	if (!isCloud) {
		gint.taskHelper.add([
				[action    : "linkIssue", ext: ": link issues to check _$it :",
				 parameters: [
						 issue  : { -> toIssueLink[] },
						 toIssue: { -> issueLinks[] },
						 link   : 'relates to',
				 ]
				],
				[action      : 'getFieldValue',
				 ext         : ": Validate that the issues link to current issue through relates to link does not have high priority: $it",
				 sleepAfter  : 3000,
				 parameters  : [
						 issue: { -> issueLinks[] },
						 field: "Priority",
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert !output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
		]
		)
		gint.taskHelper.add([
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_01 -$it _when current issue not having at least 1 issue linked to it through the blocks link type_respect given condition:",
				 expected  : 0,
				 sleep     : info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> issueLinks[] },
						 priority: "High",
				 ]
				],
				[action      : 'getFieldValue',
				 ext         : ": Validate that the issues link to current issue through relates to link have high priority: $it",
				 sleepAfter  : 3000,
				 parameters  : [
						 issue: { -> issueLinks[] },
						 field: "Priority",
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_02 -$it _when current issue having at least 1 issue linked to it through the blocks link type_respect given condition:",
				 expected  : -1,
				 sleep     : info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> issueLinks[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue',
				 ext       : ": change issue priority to Low after checking: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> issueLinks[] },
						 priority: "Low",
				 ]
				],
				[action    : "deleteLink", ext: ": linked issues to check _$it :",
				 parameters: [
						 issue  : { -> issueLinks[] },
						 toIssue: { -> toIssueLink[] },
						 link   : 'relates to',
				 ]
				],
		])
	}
}

// RELATED_ISSUES_CONDITION_TS_55_TC_13-verify forbid certain related issues_The following Groovy expression:issue.getLinkedIssues() must return at least 1 issues
[
		'forbid_certain_related_issues_returnsFromJqlSearch',
].collect {
	if(!isCloud) {
		gint.taskHelper.add([
				[action      : 'getFieldValue',
				 ext         : ": Validate that the issue returns by jql search should not have high priority: $it",
				 sleepAfter  : 3000,
				 parameters  : [
						 issue: { -> defaultIssue[] },
						 field: "Priority",
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert !output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
		])
		gint.taskHelper.add([
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_13_case_01 -$it _when the following JQL search:$jqlSearchExpression return 1 issue:",
				 expected: 0,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> defaultIssue[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue',
				 ext: ": change issue priority to High for checking: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> defaultIssue[] },
						 priority: "High",
				 ]
				],
				[action      : 'getFieldValue',
				 ext         : ": Validate that the issue returns by jql search should have high priority: $it",
				 sleepAfter  : 3000,
				 parameters  : [
						 issue: { -> defaultIssue[] },
						 field: "Priority",
				 ],
				 finalClosure: { Task task ->
					 def output = "$task.outData"
					 assert output.contains("Priority  . . . . . . . . . . : High")
				 }
				],
				[action    : 'transitionIssue',
				 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_13_Case_02 -$it _The following JQL search:$jqlSearchExpression must return at least 1 issues:",
				 expected: -1,
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue     : { -> defaultIssue[] },
						 transition: it,
				 ]
				],
				[action    : 'updateIssue',
				 ext: ": change issue priority to Low after checking: $it",
				 sleep: info?.isCloud? 5000 : 500,
				 parameters: [
						 issue   : { -> defaultIssue[] },
						 priority: "Low",
				 ]
				],
		])
	}
}







/*
1. The current issue must have at least 1 sub-tasks - default config.-positive = "DONE"
2.The current issue must have at least 1 sub-tasks/issue belongs to epic = "DONE"
3.The current issue must not have any sub-task/issue belongs to epic = "DONE"
4.The current issue must have at least 2 and at most 2 sub-tasks / issue belongs to epic = "Done"
5.The current issue must have at least 2 and at most 3 sub-tasks/issue belongs to epic = Done
6.The following Groovy expression:issue.get("project")?.key == "AUTOMATION" -must return at least 2 and at most 2 issues = "Done"
7.The current issue must have at least 2 and at most 2 sub-tasks and they must all respect the following condition:issue.get("priority")?.name == "High"
  parent issue has 3 subtasks and out of 3 ,2 subtasks must be of 'High' priority = "Done"
8.The current issue must have at least 2 and at most 2 sub-tasks and they must all respect the following condition:issue.get("creator")?.name == "automation"
  create issue with defferent users as creator's and validate issues having given creator - IMPORTANT
 */

/*
Reviewed by Niharika:
1. Verify_Issue_constraints_min_three_max_six_linkByRelatesTo
	- Negative : add link issues by different link type and check transition = DONE
2. Verify_Issue_constraints_min_two_max_two_linkByRelatesTo
	- Positive : add link issues of same link type and check transition = DONE
	- Negative : add link issues by different link type and check transition = DONE
3. Add check, require and forbid condition on same transition and check = Pending
4. Verify_Issue_constraints_min_three_max_six_linkByRelatesTo for negative integer values = Pending
5. Verify transition by admin user and non-admin user = DONE
 */