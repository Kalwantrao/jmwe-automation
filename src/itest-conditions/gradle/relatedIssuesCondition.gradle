buildscript {
	repositories {
		maven {
			url "https://plugins.gradle.org/m2/"
		}
	}
	dependencies {
		classpath "org.gint:gint-atlassian:3.8.4"
	}
}

apply plugin: 'org.gint.atlassian'
apply from: gint.resourceDirectory +'/src/common/utils.gradle'

tearDown()
addWorkflow()

def functionKey = info?.isCloud? 'com.atlassian.plugins.atlassian-connect-plugin:com.innovalog.jmwe.jira-misc-workflow-extensions__LinkedIssuesCondition' : 'com.innovalog.jmwe.jira-misc-workflow-extensions:linked-issues-condition'

def fieldsToRemove = [ "currentIssue", "parentIssue", "epicOfTheCurrentIssue","parentPortfolio" ]

fieldsToRemove.each { key ->
	relatedIssue.remove(key)
}

def defaultFieldsCloud= [
		"condition.id=d150ebe9-f65f-4199-ade5-c38062e8d5b9",
]

def linkedIssuesMode = [
		requireLinks : [ "conditionMode=requireLinks" ],
		requireSpecificLinkedIssues : [ "conditionMode=requireLinks", /groovyExpression=issue.get('assignee')?.name == "$testUser"/ ],
		checkLinks : [ "conditionMode=checkLinks", "groovyExpression=$groovyExpression.checkPriorityHigh" ],
		forbidLinks : [	"conditionMode=forbidLinks", "groovyExpression=$groovyExpression.checkPriorityHigh" ]
]

relatedIssue.eachWithIndex { key, value, i ->
	def transition = 'verify_require_certain_related_issues_' + key
	def cloud = "condition.config-d150ebe9-f65f-4199-ade5-c38062e8d5b9="
	def server = defaultFieldsServer + "selectedLinkType=$value" + linkedIssuesMode.requireLinks + issueConstraints.atLeastOne + verifyAllLinkedIssues.yes
	addTransitionFunction(transition, 'condition', server, functionKey)
}

['Verify_Issue_constraints_min_two_linkByRelatesTo'].each {
	def server = defaultFieldsServer + "selectedLinkType=$linkByRelatesTo" + linkedIssuesMode.requireLinks + issueConstraints.minTwo + verifyAllLinkedIssues.yes
	addTransitionFunction(it , 'condition', server, functionKey)
}

['Verify_Issue_constraints_max_two_linkByRelatesTo'].each {
	def server = defaultFieldsServer + "selectedLinkType=$linkByRelatesTo" + linkedIssuesMode.requireLinks + issueConstraints.maxTwo + verifyAllLinkedIssues.yes
	addTransitionFunction(it , 'condition', server, functionKey)
}

['Verify_Issue_constraints_min_three_max_six_linkByRelatesTo'].each {
	def server = defaultFieldsServer + "selectedLinkType=$linkByRelatesTo" + linkedIssuesMode.requireLinks + issueConstraints.atLeastThreeAndAtMostSix + verifyAllLinkedIssues.yes
	addTransitionFunction(it , 'condition', server, functionKey)
}

['verify_condition_on_related_issues_checkAssignee'].each {
	def server = defaultFieldsServer + "selectedLinkType=$linkByRelatesTo" + linkedIssuesMode.requireSpecificLinkedIssues + issueConstraints.atLeastOne + verifyAllLinkedIssues.yes
	addTransitionFunction(it , 'condition', server, functionKey)
}


relatedIssue.eachWithIndex { key, value, i ->
	def transition = 'verify_check_related_issues_' + key
	def server = defaultFieldsServer + "selectedLinkType=$value" + linkedIssuesMode.checkLinks + issueConstraints.atLeastOne + verifyAllLinkedIssues.yes
	addTransitionFunction( transition, 'condition', server, functionKey)
}

relatedIssue.eachWithIndex { key, value, i ->
	def transition = 'forbid_certain_related_issues_' + key
	def server = defaultFieldsServer + "selectedLinkType=$value" + linkedIssuesMode.forbidLinks + issueConstraints.atLeastOne + verifyAllLinkedIssues.yes
	addTransitionFunction( transition, 'condition', server, functionKey)
}

createWorkflowScheme()
createProject()

def defaultIssue = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'default')
def parent = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'parent')
def subtask = createIssue([type: 'Sub-task', summary: 'JMWE_Issue', parent: { ->parent[] }], 'Sub-task')
def epicNoChildIssue = createIssue([type: 'Epic', summary: 'JMWE_Issue', field: "Epic Name", value: "JMWE_Issue"], 'EpicNoChildIssue')
def epic = createIssue([type: 'Epic', summary: 'JMWE_Issue', field: "Epic Name", value: "JMWE_Issue"], 'Epic')
def issueBelongsToEpic = createIssue([type: 'Task', summary: 'JMWE_Issue', field: "Epic Link", value: {->epic[]}], 'BelongsToEpic')
def initiativeNoChildIssue = createIssue([type: 'Initiative', summary: 'JMWE_Issue'], 'InitiativeNoChildIssue')
def initiative = createIssue([type: 'Initiative', summary: 'JMWE_Issue'], 'Initiative')
def epic_initiative = createIssue([type: 'Epic', summary: 'JMWE_Issue', field: "Epic Name", value: "JMWE_Issue"], 'Epic_initiative')
def issueLinks = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'issueLinks')
def blocks = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'blocks')
def clones = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'clones')
def duplicates = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'duplicates')
def relatesTo = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesTo')
def relatesToIssue2 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue2')
def jqlIssue = createIssue([type: 'Task', summary: 'JQL_ISSUE'], 'jqlIssue')
def relatesToIssue3 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue3')
def relatesToIssue4 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue4')
def relatesToIssue5 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue5')
def relatesToIssue6 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue6')
def relatesToIssue7 = createIssue([type: 'Task', summary: 'JMWE_Issue'], 'relatesToIssue7')

updateIssue([issue: {->epic_initiative[]}, field: "Parent Link", value: {->initiative[]}], "parent initiative child epic")

def linkIssuesMap = [
		blocks : {->blocks[]},
		clones : {->clones[]},
		duplicates : {->duplicates[]},
		'relates to': {->relatesTo[]}
]

linkIssuesMap.eachWithIndex { key, value, i ->
	linkIssue([issue: {->issueLinks[]}, toIssue: value, link: "$key"], key)
}


/*   -----------------------------------------------------------------------------------------------------------------------------------
     -----------------------------------------------------------------------------------------------------------------------------------
                                      RELATED_ISSUES_CONDITION => REQUIRE CERTAIN RELATED ISSUES
     -----------------------------------------------------------------------------------------------------------------------------------
     -----------------------------------------------------------------------------------------------------------------------------------   */

// RELATED_ISSUES_CONDITION_TC_14-verify require certain related issues and subtask of the current issue
[
		'verify_require_certain_related_issues_subtask',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_14_Case_01 -$it _when issue having one subtask:",
			 expected  : -1,
			 parameters: [
					 issue     : {->parent[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_14_Case_02 -$it _when issue not having subtask:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_17-verify require certain related issues_issueBelongsToEpic
[
		'verify_require_certain_related_issues_issueBelongsToEpic',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 expected  : 0,
			 ext       : ":RELATED_ISSUES_CONDITION_TC_17_Case_01 -$it _when epic having one issueBelongsToEpic:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it
			 ]
			],

			[action    : 'transitionIssue',
			 expected  : -1,
			 ext       : ":RELATED_ISSUES_CONDITION_TC_17_Case_02 -$it _when epic not having issueBelongsToEpic:",
			 parameters: [
					 issue     : {->epicNoChildIssue[]},
					 transition: it ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_21-verify require certain related issues_child issue in the Portfolio hierarchy
[
		'verify_require_certain_related_issues_childPortfolio',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_21_Case_01 -$it _current issue must have one child issue in the Portfolio hierarchy:",
			 expected  : 0,
			 parameters: [
					 issue     : {->initiative[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_21_Case_02 -$it _when current issue not having child issues in the Portfolio hierarchy:",
			 expected  : -1,
			 parameters: [
					 issue     : {->initiativeNoChildIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_26-verify require certain related issues_current issue must have at least 1 issues linked to it through any link type
[
		'verify_require_certain_related_issues_linkByAnyLink',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_26_Case_01 -$it _current issue having one issue linked to it through any link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_26_Case_02 -$it _current issue not having issues linked to it through any link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_27-verify require certain related issues_current issue must have at least 1 issues linked to it through the blocks link type
[
		'verify_require_certain_related_issues_linkByBlock',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_27_Case_01 -$it _when current issue have at least 1 issue linked to it through the blocks link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_27_Case_02 -$it _The current issue not having issues linked to it through the blocks link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_29-verify require certain related issues_current issue must have at least 1 issues linked to it through the is blocked by link type
[
		'verify_require_certain_related_issues_linkByisBlockedBy',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_29_Case_01 -$it _when current issue have 1 issue linked to it through the is blocked by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->blocks[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_29_Case_02 -$it _when current issue not having issues linked to it through the is blocked by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_31-verify require certain related issues_current issue must have at least 1 issues linked to it through the clones link type
[
		'verify_require_certain_related_issues_linkByClones',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_01 -$it _when current issue have issue linked to it through the clones link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_02 -$it _when current issue not have issues linked to it through the clones link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_32-verify require certain related issues_current issue must have at least 1 issues linked to it through the is cloned by link type
[
		'verify_require_certain_related_issues_linkByIsClonedBy',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_01 -$it _when current issue have issue linked to it through the is cloned by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->clones[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_02 -$it _when current issue not having issues linked to it through the is cloned by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_33-verify require certain related issues_current issue must have at least 1 issues linked to it through the duplicates link type
[
		'verify_require_certain_related_issues_linkByDuplicates',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_01 -$it _when current issue have issue linked to it through the duplicates link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_31_Case_02 -$it _when current issue not having issues linked to it through the duplicates link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_34-verify require certain related issues_current issue must have at least 1 issues linked to it through the is duplicated by link type
[
		'verify_require_certain_related_issues_linkByIsDuplicatedBy',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_34_Case_01 -$it _when current issue have issue linked to it through the is duplicated by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->duplicates[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_34_Case_02 -$it _when current issue not having issues linked to it through the is duplicated by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_37-verify require certain related issues_current issue must have at least 1 issues linked to it through the relates to link type
[
		'verify_require_certain_related_issues_linkByRelatesTo',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_37_Case_01 -$it _when current issue have issue linked to it through the relates to link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_37_Case_02 -$it _when current issue not having issues linked to it through the relates to link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_38-verify require certain related issues_The following Groovy expression:issue.getLinkedIssues() must return at least 1 issues
[
		'verify_require_certain_related_issues_returnsByGroovyExpression',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_38_Case_01 -$it _when the following Groovy expression:$returnsLinkedIssues return at least 1 issue:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_38_Case_02 -$it _The following Groovy expression:$returnsLinkedIssues not returns issues:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_40-verify require certain related issues_The following JQL search:issuetype = Task and summary~JQL_ISSUE must return at least 1 issues
[
		'verify_require_certain_related_issues_returnsFromJqlSearch',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_40_Case_01 -$it _when the following JQL search:$jqlSearchExpression return 1 issue:",
			 expected  : 0,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
			[action    : 'updateIssue',
			 ext       : ":change the issue type to check when jql search not returns any issues for:"+ it,
			 sleepAfter: 3000,
			 parameters: [
					 issue     : {->jqlIssue[]},
					 issueType: "Bug" ,
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_40_Case_02 -$it _The following JQL search:$jqlSearchExpression must return at least 1 issues:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
			[action    : 'updateIssue',
			 ext       : ":change the issue type after checking when jql search not returns any issues for:"+ it,
			 sleepAfter: 3000,
			 parameters: [
					 issue     : {->jqlIssue[]},
					 issueType: "Task" ,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_42_Case_01-verify require certain related issues_The current issue must have at least 2 issues linked to it through the relates to link type
[
		'Verify_Issue_constraints_min_two_linkByRelatesTo'
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_42_Case_01 _$it _when current issue not having at least 2 issues linked to it through the relates to link type:",
			 expected  : -1,
			 parameters: [
					 issue     : { -> issueLinks[] },
					 transition: it,
			 ]
			],
			[action: 'linkIssue', ext: ": by relates to link type to check min issue constraints option:",
					parameters: [
					        issue: {-> issueLinks[]},
							toIssue: {-> relatesToIssue2[]},
							link: 'relates to'
					]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_42_Case_02 _$it _when current issue having at least 2 issues linked to it through the relates to link type:",
			 expected  : 0,
			 parameters: [
					 issue     : { -> issueLinks[] },
					 transition: it,
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_43_Case_01-verify require certain related issues_The current issue must not have more than 2 issues linked to it through the relates to link type
[
		'Verify_Issue_constraints_max_two_linkByRelatesTo'
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_43_Case_01 _$it _when current issue not having more than 2 issues linked to it through the relates to link type:",
			 expected  : 0,
			 parameters: [
					 issue     : { -> issueLinks[] },
					 transition: it,
			 ]
			],
			[action: 'linkIssue', ext: ": by relates to link type to check max issue constraints option:",
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> relatesToIssue3[]},
					 link: 'relates to'
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_43_Case_02 _$it _when current issue having more than 3 issues linked to it through the relates to link type:",
			 expected  : -1,
			 parameters: [
					 issue     : { -> issueLinks[] },
					 transition: it,
			 ]
			],
			[action: 'deleteLink', ext : ': issues linked to check min_issue constraints:',
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> relatesToIssue2[]},
					 link: 'relates to'
			 ]
			],
			[action: 'deleteLink', ext : ': issues linked to check max_issue constraints:',
			 parameters: [
					 issue: {-> issueLinks[]},
					 toIssue: {-> relatesToIssue3[]},
					 link: 'relates to'
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TC_44- The current issue must have at least 3 and at most 6 issues linked to it through the relates to link type
[
		'Verify_Issue_constraints_min_three_max_six_linkByRelatesTo'
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_44_Case_01 _$it _when current issue not have at least 3 and at most 6 issues linked to it through the relates to link type:",
			 expected  : -1,
			 parameters: [
					 issue     : { -> issueLinks[] },
					 transition: it,
			 ]
			],
			[action    : 'linkIssue', ext: ": by relates to link type to check min and max issue constraints option:" + it,
			 parameters: [
					 issue  : { -> issueLinks[] },
					 toIssue: { -> relatesToIssue2[] },
					 link   : 'relates to'
			 ]
			],
			[action    : 'linkIssue', ext: ": by relates to link type to check min and max issue constraints option2:" + it,
			 parameters: [
					 issue  : { -> issueLinks[] },
					 toIssue: { -> relatesToIssue3[] },
					 link   : 'relates to'
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_44_Case_02 _$it _when current issue having at least 3 issues linked to it through the relates to link type:",
			 expected  : 0,
			 parameters: [
					 issue     : { -> issueLinks[] },
					 transition: it,
			 ]
			],
	])
}

// link the issues to check the issue constraint options for max 6 issues by relates to link type
def relatesToIssuesList = [
		issue2 : {->relatesToIssue2[]},
		issue3 : {->relatesToIssue3[]},
		issue4 : {->relatesToIssue4[]},
		issue5 : {->relatesToIssue5[]},
		issue6 : {->relatesToIssue6[]},
		issue7 : {->relatesToIssue7[]}
]

relatesToIssuesList.eachWithIndex { key, value, i ->
	gint.taskHelper.add(
			[action    : 'linkIssue', ext: ": by relates to link type to check max issue constraints option:" + key,
			 parameters: [
					 issue  : { -> issueLinks[] },
					 toIssue: value,
					 link   : 'relates to'
			 ],
			])
}

[
		'Verify_Issue_constraints_min_three_max_six_linkByRelatesTo'
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_44_Case_03 _$it _when current issue have at least 3 and but more than 6 ie 7 issues linked to it through the relates to link type:",
			 expected  : -1,
			 parameters: [
					 issue     : { -> issueLinks[] },
					 transition: it,
			 ]
			],
	])
}

// delete link between issues to while check the issue constraint options for max 6 issues by relates to link type
relatesToIssuesList.eachWithIndex { key, value, i ->
	gint.taskHelper.add(
			[action    : 'deleteLink', ext: ": by relates to link type to check max issue constraints option:" + key,
			 parameters: [
					 issue  : { -> issueLinks[] },
					 toIssue: value,
					 link   : 'relates to'
			 ],
			])
}

// RELATED_ISSUES_CONDITION_TC_49 - current issue must have at least 1 and at most 0 issues linked to it through the relates to link type, and at least one of them must respect the following condition
[
		'verify_condition_on_related_issues_checkAssignee'
].each {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_49_Case_01 -$it _when current issue not having at least 1 issues linked to it through the relates to link type which respect the following condition_issue must have assignee $testUser:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action    : 'assignIssue', ext: ": to _ $testUser to_ $it :",
			 parameters: [
					 issue  : { -> relatesTo[] },
					 assignee: testUser,
			 ],
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TC_49_Case_02 -$it _when current issue having at least 1 issues linked to it through the relates to link type which respect the following condition_issue must have assignee $testUser:",
			 expected  : 0,
			 parameters: [
					 issue     : {->relatesTo[]},
					 transition: it ,
			 ]
			],
			[action    : 'assignIssue', ext: ": to _ UNASSIGNED issue- after_ $it :",
			 parameters: [
					 issue  : { -> relatesTo[] },
					 assignee: " ",
			 ],
			],
	])
}


/* -----------------------------------------------------------------------------------------------------------------------------------
   -----------------------------------------------------------------------------------------------------------------------------------
                                          RELATED_ISSUES_CONDITION => CHECK RELATED ISSUES TESTS
   ------------------------------------------------------------------------------------------------------------------------------------
   ----------------------------------------------------------------------------------------------------------------------------------- */

// RELATED_ISSUES_CONDITION_TS_51 -verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_subtask',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_01_Case_01 -$it _when issue having subtask not respecting given condition :",
			 expected  : -1,
			 parameters: [
					 issue     : {->parent[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ":  change issue priority to high satisfy the criteria to check: $it",
			parameters: [
			        issue: {->parent[]},
					priority: "High",
			]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_01_Case_02 -$it _when issue having subtask respecting given condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->parent[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to low satisfy the criteria after checking: $it",
			 parameters: [
					 issue: {->parent[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_02-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_issueBelongsToEpic',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 expected  : -1,
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_02_Case_01 -$it _when epic having issueBelongsToEpic not respecting condition:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it
			 ]
			],
			[action: 'updateIssue', ext: ":  change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->epic[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 expected  : 0,
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_02_Case_02 -$it _when epic having issueBelongsToEpic respecting condition:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it ]
			],
			[action: 'updateIssue', ext: ": change issue priority to low satisfy the criteria after checking: $it",
			 parameters: [
					 issue: {->epic[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_03-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_childPortfolio',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_03_Case_01 -$it _when parent issue not having issues child issues in portfolio hierarchy respecting given condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->initiative[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->initiative[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_03_Case_02 -$it _when parent issue having issues child issues in portfolio hierarchy respecting given condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->initiative[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to low satisfy the criteria after checking: $it",
			 parameters: [
					 issue: {->initiative[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_04-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByAnyLink',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_04_Case_01 -$it _current issue not having issue linked to it through any link type which respect given condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->blocks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_04_Case_02 -$it _current issue having issue linked to it through any link type which respect given condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to low satisfy the criteria after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_05-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByBlock',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_01 -$it _when current issue not having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_05_Case_02 -$it _when current issue having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_06-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByisBlockedBy',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_06_Case_01 -$it _when current issue have 1 issue linked to it through the is blocked by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->blocks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->blocks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_06_Case_02 -$it _when current issue not having issues linked to it through the is blocked by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->blocks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->blocks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_07-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByClones',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_07_Case_01 -$it _when current issue have issue linked to it through the clones link type_not respecting given condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_07_Case_02 -$it _when current issue not have issues linked to it through the clones link type_respecting given condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_08-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByIsClonedBy',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_08_Case_01 -$it _when current issue have issue linked to it through the is cloned by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->clones[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->clones[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_08_Case_02 -$it _when current issue not having issues linked to it through the is cloned by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->clones[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->clones[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_09-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByDuplicates',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_09_Case_01 -$it _when current issue have issue linked to it through the duplicates link type_not respecting condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_09_Case_02 -$it _when current issue not having issues linked to it through the duplicates link type_respecting condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_10-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByIsDuplicatedBy',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_10_Case_01 -$it _when current issue have issue linked to it through the is duplicated by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->duplicates[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->duplicates[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_10_Case_02 -$it _when current issue not having issues linked to it through the is duplicated by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->duplicates[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->duplicates[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_11-verify Check related issues and verify with different - Target issues
[
		'verify_check_related_issues_linkByRelatesTo',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_11_Case_01 -$it _when current issue have issue linked to it through the relates to link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_11_Case_02 -$it _when current issue not having issues linked to it through the relates to link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_12-verify check certain related issues_The following Groovy expression:issue.getLinkedIssues() must return at least 1 issues
[
		'verify_check_related_issues_returnsByGroovyExpression',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_12_Case_01 -$it _when the following Groovy expression:$returnsLinkedIssues return at least 1 issue:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_12_Case_02 -$it _The following Groovy expression:$returnsLinkedIssues not returns issues:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_51_TC_13-verify check certain related issues_The following Groovy expression:issue.getLinkedIssues() must return at least 1 issues
[
		'verify_check_related_issues_returnsFromJqlSearch',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_13_case_01 -$it _when the following JQL search:$jqlSearchExpression return 1 issue:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->defaultIssue[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_51_TC_13_Case_02 -$it _The following JQL search:$jqlSearchExpression must return at least 1 issues:",
			 expected  : 0,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->defaultIssue[]},
					 priority: "Low",
			 ]
			],
	])
}



/* -----------------------------------------------------------------------------------------------------------------------------------
   -----------------------------------------------------------------------------------------------------------------------------------
                                     RELATED_ISSUES_CONDITION => FORBID CERTAIN RELATED ISSUES
   -----------------------------------------------------------------------------------------------------------------------------------
   ----------------------------------------------------------------------------------------------------------------------------------- */

// RELATED_ISSUES_CONDITION_TS_55-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_subtask',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_01_Case_01 -$it _when issue having subtask not respecting given condition :",
			 expected  : 0,
			 parameters: [
					 issue     : {->parent[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ":  change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->parent[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_01_Case_02 -$it _when issue having subtask respecting given condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->parent[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to low satisfy the criteria after checking: $it",
			 parameters: [
					 issue: {->parent[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_02-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_issueBelongsToEpic',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 expected  : 0,
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_02_Case_01 -$it _when epic having issueBelongsToEpic not respecting condition:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it
			 ]
			],
			[action: 'updateIssue', ext: ":  change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->epic[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 expected  : -1,
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_02_Case_02 -$it _when epic having issueBelongsToEpic respecting condition:",
			 parameters: [
					 issue     : {->epic[]},
					 transition: it ]
			],
			[action: 'updateIssue', ext: ": change issue priority to low satisfy the criteria after checking: $it",
			 parameters: [
					 issue: {->epic[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_03-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_childPortfolio',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_03_Case_01 -$it _when parent issue not having issues child issues in portfolio hierarchy respecting given condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->initiative[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->initiative[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_03_Case_02 -$it _when parent issue having issues child issues in portfolio hierarchy respecting given condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->initiative[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to low satisfy the criteria after checking: $it",
			 parameters: [
					 issue: {->initiative[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_04-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByAnyLink',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_04_Case_01 -$it _current issue not having issue linked to it through any link type which respect given condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->blocks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_04_Case_02 -$it _current issue having issue linked to it through any link type which respect given condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to low satisfy the criteria after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_05-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByBlock',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_05_Case_01 -$it _when current issue not having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_05_Case_02 -$it _when current issue having at least 1 issue linked to it through the blocks link type_respect given condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_06-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByisBlockedBy',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_06_Case_01 -$it _when current issue have 1 issue linked to it through the is blocked by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->blocks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->blocks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_06_Case_02 -$it _when current issue not having issues linked to it through the is blocked by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->blocks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->blocks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_07-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByClones',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_07_Case_01 -$it _when current issue have issue linked to it through the clones link type_not respecting given condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to high satisfy the criteria to check: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_07_Case_02 -$it _when current issue not have issues linked to it through the clones link type_respecting given condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_08-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByIsClonedBy',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_08_Case_01 -$it _when current issue have issue linked to it through the is cloned by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->clones[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->clones[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_08_Case_02 -$it _when current issue not having issues linked to it through the is cloned by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->clones[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->clones[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_09-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByDuplicates',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_09_Case_01 -$it _when current issue have issue linked to it through the duplicates link type_not respecting condition:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_09_Case_02 -$it _when current issue not having issues linked to it through the duplicates link type_respecting condition:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_10-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByIsDuplicatedBy',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_10_Case_01 -$it _when current issue have issue linked to it through the is duplicated by link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->duplicates[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->duplicates[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_10_Case_02 -$it _when current issue not having issues linked to it through the is duplicated by link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->duplicates[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->duplicates[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_11-verify Forbid certain related issues and verify with different - Target issues
[
		'forbid_certain_related_issues_linkByRelatesTo',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_11_Case_01 -$it _when current issue have issue linked to it through the relates to link type:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_11_Case_02 -$it _when current issue not having issues linked to it through the relates to link type:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_12-verify Forbid certain related issues_The following Groovy expression:issue.getLinkedIssues() must return at least 1 issues
[
		'forbid_certain_related_issues_returnsByGroovyExpression',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_12_Case_01 -$it _when the following Groovy expression:$returnsLinkedIssues return at least 1 issue:",
			 expected  : 0,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_12_Case_02 -$it _The following Groovy expression:$returnsLinkedIssues not returns issues:",
			 expected  : -1,
			 parameters: [
					 issue     : {->issueLinks[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->issueLinks[]},
					 priority: "Low",
			 ]
			],
	])
}

// RELATED_ISSUES_CONDITION_TS_55_TC_13-verify forbid certain related issues_The following Groovy expression:issue.getLinkedIssues() must return at least 1 issues
[
		'forbid_certain_related_issues_returnsFromJqlSearch',
].collect {
	gint.taskHelper.add([
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_13_case_01 -$it _when the following JQL search:$jqlSearchExpression return 1 issue:",
			 expected  : 0,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to High for checking: $it",
			 parameters: [
					 issue: {->defaultIssue[]},
					 priority: "High",
			 ]
			],
			[action    : 'transitionIssue',
			 ext       : ":RELATED_ISSUES_CONDITION_TS_55_TC_13_Case_02 -$it _The following JQL search:$jqlSearchExpression must return at least 1 issues:",
			 expected  : -1,
			 parameters: [
					 issue     : {->defaultIssue[]},
					 transition: it ,
			 ]
			],
			[action: 'updateIssue', ext: ": change issue priority to Low after checking: $it",
			 parameters: [
					 issue: {->defaultIssue[]},
					 priority: "Low",
			 ]
			],
	])
}



/*
1. The current issue must have at least 1 sub-tasks - default config.-positive = "DONE"
2.The current issue must have at least 1 sub-tasks/issue belongs to epic = "DONE"
3.The current issue must not have any sub-task/issue belongs to epic = "DONE"
4.The current issue must have at least 2 and at most 2 sub-tasks / issue belongs to epic = "Done"
5.The current issue must have at least 2 and at most 3 sub-tasks/issue belongs to epic = Done
6.The following Groovy expression:issue.get("project")?.key == "AUTOMATION" -must return at least 2 and at most 2 issues = "Done"
7.The current issue must have at least 2 and at most 2 sub-tasks and they must all respect the following condition:issue.get("priority")?.name == "High"
  parent issue has 3 subtasks and out of 3 ,2 subtasks must be of 'High' priority = "Done"
8.The current issue must have at least 2 and at most 2 sub-tasks and they must all respect the following condition:issue.get("creator")?.name == "automation"
  create issue with defferent users as creator's and validate issues having given creator - IMPORTANT
 */
