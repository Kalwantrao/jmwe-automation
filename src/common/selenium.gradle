//gradle -b src/itest-selenium/selenium.gradle -Dbrowser=firefox -Ddelay=3

def info = gint.getJiraHelper().getServerInfoWithVerify()
def userName = info?.isCloud ? user : testUserNameServer
def password = info?.isCloud ? testUserPasswordCloud : testUserPasswordServer
gint.getJiraHelper().getSeleniumHelper()
gint.seleniumHelper.addInitializeTask()
ext.driver = gint.seleniumHelper
gint.helper.log 'selenium helper', gint.seleniumHelper.class.name
def isCloud = info?.isCloud

if (!info?.isCloud) {
    gint.seleniumHelper.addLoginTask(
            serverInfo: info,
            sleep: 5000,
            user: userName,
            password: password,
            adminLogin: true,
    )
} else {
    gint.getSeleniumHelper().setFindDefaultParameters(wait: gint.helper.getIntegerParameterValue('wait', 5))
    gint.seleniumHelper.setDelay(5000)
    gint.getSeleniumHelper().addLoginTask(
            serverInfo: info,
            user: userName,
            password: password,
            verbose: false,
            adminLogin: true,
    )
}

gint.taskHelper.add(
        dependsOn: true,
        inline: {
            gint.seleniumHelper.gotoUrl(url: info?.url)
        }
)


